## DNS
컴퓨터의 호스트 이름을 IP 주소로 전환하는 서비스

## 왜 전환하지?
1. IP 주소는 기억하기 어렵고 호스트 이름은 기억하기 쉬울 뿐더러 이름에서 어떤 사이트인지 유추가 가능하기 때문
2. IP 주소가 변경되도 호스트 네임을 고정하면 사용자 입장에서 호스트 이름만 기억하면 문제 없음

## 구현

### 한 서버에 몰아넣으면 어떻게 될까?
1. 그 서버가 고장나면 인터넷 마비
2. 그 서버의 저장공간이 수 많은 주소를 감당 불가능
3. 거리가 먼 곳은 시간이 너무 오래 걸림
4. 해당 서버의 트래픽 양이 감당이 안됨

### 실제 구현 방법은 계층화
높은 순서대로 Root Server -> Top Level Domain Server -> Authoritative DNS Server 로 구성된다.

### 루트 서버
루트 서버는 TLD 서버를 관장함. TLD 서버의 IP 주소를 알고있음.

### TLD 서버
TLD 서버는 자신의 도메인에 맞는 Authoritative DNS 서버를 관장함. 

### Authoritative 서버
각 기관마다 존재하고 그 기관의 여러 IP 주소를 알고있음.

### 로컬 DNS 서버
간단히 생각하면 프록시 서버와 유사함. 유저가 IP주소를 물었을때 해당 서버가 알고있으면 루트까지 안가고 바로 유저에게 알려줌. 이때 최종 목적지를 모르더라도 중간의 
TLD나 Authoritative 서버 주소를 안다면 루트서버를 거치지 않음.

덕분에 사용자는 한번의 요청만으로 IP주소를 알아낼 수 있다. (여러번의 요청은 로컬 DNS 서버가 해줌)

## DNS 레코드
(Name, Value, Type, TTL)

### Type
A타입, NS타입, CNAME 타입 등이 존재함

1. A타입: name이 host name, value가 IP 주소인 레코드
2. NS타입: name이 도메인 이름, value는 책임 서버의 호스트 이름인 레코드
3. CNAME타입: value는 호스트 네임의 별명 name의 정식 호스트 네임

### Type은 왜 나눠?
맨 아래의 책임 서버를 제외한 나머지 상위 DNS 서버는 A타입과 NS타입 레코드를 쌍으로 가지고 있다. 즉, 특정 호스트 네임의 책임 DNS 서버면 A타입만 갖고 아니라면 책임 DNS 서버의
이름을 담은 NS 레코드와 그에 해당하는 A 레코드도 포함한다.

### TTL
만약 DNS 서버가 변경된 IP 주소를 계속 저장한다면 문제가 되므로 레코드의 만료기간을 명시한 것이 TTL

## DNS 등록
1. 일단 자신의 기관의 책임 DNS 서버를 만든다.
2. 자신의 도메인에 맞는 TLD 서버에 NS, A 레코드를 등록하도록 등록기관에게 요금을 지불하고 등록한다.

## DNS는 왜 UDP를 사용할까
1. DNS 메시지는 크기가 매우 작다. (HTTP 메시지에 비해)
2. 크기가 작은 만큼 손상이 될 확률도 적고, 손실이 되어도 다시 보내면 그만이다.
3. 근데 굳이 비효율적으로 높은 비용, 연결작업을 요구하는 TCP를 사용할 필요는 없기때문.
4. 사용자의 본래 가장 큰 목적은 IP 주소를 알아내는 게 아니라 해당 사이트의 데이터가 필요한 것

