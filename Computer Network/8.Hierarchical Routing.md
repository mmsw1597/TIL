# 네트워크 계층화의 필요성
1. link state나 distance vector 알고리즘은 실제 네트워크 상에 적용이 가능할까?
2. 답은 비현실적이라고 할 수 있다. link state만 해도 전 세계의 라우터에 브로드캐스트 메시지를 날리는 것은 말이 안된다.
3. 따라서 네트워크를 계층화하여 그 범위를 좁힐 필요가 있다.
4. 라우터 단위로 알고리즘을 적용하는 것 뿐만아니라 네트워크 단위로도 알고리즘이 필요하다.

# AS
1. Autonomous System
2. 특정 네트워크가 사용하는 네트워크 정책(라우팅 알고리즘, fire wall 등)은 해당 네트워크 주인이 결정한다.

# Intra-AS Routing Algorithm
1. 하나의 네트워크 내부에서의 라우팅 알고리즘.
2. 이때 라우팅 알고리즘은 속도, Performance에 집중하여 경로를 결정한다.
3. 따라서 최단경로 알고리즘인 distance vector 나 link state에 기반한 알고리즘을 사용한다.

# Inter-AS Routing Algorithm
1. 네트워크끼리의 라우팅 알고리즘
2. 이때 라우팅 알고리즘은 정책, 경제원리에 우선하여 경로를 결정한다. 최단거리를 1순위로 우선시 하지 않는다.
3. 대표적인 알고리즘(프로토콜)은 BGP가 있다.

### 네트워크에 관한 이야기
1. AS마다 크기와 권위는 제 각각이다. 그 권위에 따라 provider(돈을 받고 인터넷 서비스를 제공)가 되거나 customer(돈을 내고 인터넷 서비스를 받음)가 된다.
2. 같은 급의 네트워크 끼리는 peer 관계를 맺는다. 일종의 동맹 관계이고 이들은 서로 데이터를 주고받을때 돈을 주고받지 않는다.
3. 네트워크 생태계에서는 일종의 먹이사슬이 있다고 보면 된다.

# BGP
1. 네트워크끼리 통신할때 사용되는 프로토콜
2. 나를 통해서 갈 수 있는 네트워크의 prefix를 메시지에 담아 전달한다.
3. 최단거리를 우선시하는 프로토콜이 아니다.
4. 결론부터 말하면 네트워크가 메시지를 전달할때 선택하는 경로는 next hop 이 customer > peer > provider 인 우선순위로 선택한다. customer으로 가는 경로가 얼마나 길든 상관없다.

### BGP 메시지를 전달 원칙
1. provider -> customer -> provider 류의 경로는 전달할 수 없게 설정되어 있다. 왜냐하면 이 상황에서 customer는 남의 네트워크 데이터를 운반하는데 돈을 오히려 쓰기 때문
2. 네트워크는 BGP 메시지를 자신의 custom 에게는 줄 수 있지만 자신의 peer에게는 BGP 메시지를 줄 수 없게 되어 있다. 해당 peer가 일종의 봉사활동을 하게 될 수 있으니까
3. (그냥 교양 지식 정도로 알아두자~)
